;의상을 찢는다

;성 커맨드 분류
@SEX_TYPE_COM14
RETURN 통상

@SEX_COM14,ARG = 0, ARG:1 = 0
#DIM DAMAGE
;추가 고문
EX_COM = 0
SH_COM = 0

;취득 파라미터 계산
;BASE값의 명시적 초기화
REPEAT 12
	LOCAL:COUNT = 0
REND

;방심도 상승
TFLAG:3 += 10

;사정치 50
CALL TENTACLE_SYASEI_UP, 50

;촉수 크기 설정
CALL SET_TENTACLE_SIZE, FLAG:10, FLAG:11, ENEMY_TYPE_CHECK_F("AKUOTI"), FLAG:111, 14

CALL PALAM_VABCestimate(LOCAL,-1)


IF ENEMY_TYPE_CHECK_F("MOB") == 1 || ENEMY_TYPE_CHECK_F("CITIZEN") == 1
	TRYCALLFORM MESSAGE_MOB_{ARG}_COM14, EX_COM, SH_COM
ELSE
	;지문: 세뇌/흑화 캐릭터가 조작 캐릭터의 의상을 찢었다
	SIF ENEMY_TYPE_CHECK_F("AKUOTI") == 1
		CALL MESSAGE_OTHER_SEX_COM14
	;지문: COM14
	CALL MESSAGE_SEX_COM14
ENDIF

;결계에 따른 촉수 개수의 변동
CALL SET_TENTACLE_POOL

;BASE
;치정, 노출벽Lv에 따라 경감
IF ABL:치정 <= 2
	LOCAL:9 = 2000
ELSEIF ABL:치정 == 3
	LOCAL:9 = 1000
ELSEIF ABL:치정 == 4
	LOCAL:9 = 500
ELSEIF ABL:치정 >= 5
	LOCAL:9 = 100
ENDIF

;겉옷이 남아있을 경우 수치를 경감
IF CLOTH_OUTER_PER > 90
	TIMES LOCAL:9, 0.25
ELSEIF CLOTH_OUTER_PER > 75
	TIMES LOCAL:9, 0.75
ELSEIF CLOTH_INNER_PER < 25
	TIMES LOCAL:9, 1.25
ENDIF

;공순/공포
IF ABL:순종 == 1
	LOCAL:11 = 2000
ELSEIF ABL:순종 == 2
	LOCAL:11 = 1000
ELSEIF ABL:순종 == 3
	LOCAL:11 = 500
ELSEIF ABL:순종 == 4
	LOCAL:5 = 200
ELSEIF ABL:순종 >= 5
	LOCAL:5 = 600
ENDIF

;피해량을 계산
DAMAGE = RAND:11 + RAND:11 + 10

;의상에의 피해량을 반영
FONTBOLD
PRINTFORML 의상에 {DAMAGE}의 손상을 입었다！
FONTREGULAR
PRINTL 
CALL CLOTH_BATTLE_DAMAGE, DAMAGE

;이전 턴이 옷을 찢지 않은 경우, 행동 예약을 이어받는다
SIF TFLAG:20 == 14
	TFLAG:17 = -1

;촉수의 행동을 기록
TFLAG:20 = 14

;습득 기본값
LOCAL:6 += 0

;욕정 기본값
LOCAL:7 += 0

;굴복 기본값
LOCAL:8 += 0

;치정 기본값
LOCAL:9 += 1000

;고통 기본값
LOCAL:10 += 0

;공포 기본값
LOCAL:11 += 0

;체력 소비 기본값
LOCAL:12 += 0

;계산으로
CALL PALAM_CAL, LOCAL:0, LOCAL:1, LOCAL:2, LOCAL:3, LOCAL:4, LOCAL:5, LOCAL:6, LOCAL:7, LOCAL:8, LOCAL:9, LOCAL:10, LOCAL:11, LOCAL:12
