;Ａ공격（약）

;성 커맨드 분류
@SEX_TYPE_COM4
RETURN 통상

@SEX_COM4,ARG = 0,ARG:1 = 0
;EX_COM	추가 고문 실행 부위（비트）
;	1：Ｃ　2：Ｖ　4：Ａ　8：Ｂ
;추가 고문
CALL SEX_COMEX_RANDOM, Ａ, ARG:1
EX_COM = RESULT:0
SH_COM = RESULT:1

;취득 파라미터 계산
;BASE값의 명시적 초기화
REPEAT 12
	LOCAL:COUNT = 0
REND

;방심도 상승
TFLAG:3 += 25

;사정치 100
CALL TENTACLE_SYASEI_UP, 100

;촉수 크기 설정
CALL SET_TENTACLE_SIZE, FLAG:10, FLAG:11, ENEMY_TYPE_CHECK_F("AKUOTI"), FLAG:111, 4

;쾌Ａ　감각이 낮을 때는 적다
IF CONFIG_CHECK_BALANCE_F(7) == 0
	IF ABL:Ａ감각 == 0
		LOCAL:2 = 40
	ELSEIF ABL:Ａ감각 == 1
		LOCAL:2 = 400
	ELSEIF ABL:Ａ감각 == 2
		LOCAL:2 = 1000
	ELSEIF ABL:Ａ감각 == 3
		LOCAL:2 = 2000
	ELSEIF ABL:Ａ감각 == 4
		LOCAL:2 = 4000
	ELSEIF ABL:Ａ감각 >= 5
		LOCAL:2 = 10000
	ENDIF
;컨피그 ON이라면 쾌Ａ 증가
ELSEIF CONFIG_CHECK_BALANCE_F(7) > 0
	IF ABL:Ａ감각 == 0
		LOCAL:2 = 500
	ELSEIF ABL:Ａ감각 == 1
		LOCAL:2 = 1000
	ELSEIF ABL:Ａ감각 == 2
		LOCAL:2 = 2000
	ELSEIF ABL:Ａ감각 == 3
		LOCAL:2 = 4000
	ELSEIF ABL:Ａ감각 == 4
		LOCAL:2 = 8000
	ELSEIF ABL:Ａ감각 >= 5
		LOCAL:2 = 10000
	ENDIF
ENDIF
;메인 부위 절정 예정의 예측
CALL PALAM_VABCestimate(LOCAL,2,-1)


IF ENEMY_TYPE_CHECK_F("MOB") == 1 || ENEMY_TYPE_CHECK_F("CITIZEN") == 1
	TRYCALLFORM MESSAGE_MOB_{ARG}_COM4, EX_COM, SH_COM
ELSE
	;지문: 세뇌/흑화 캐릭터가 조작 캐릭터에게 Ａ공격（약）을 했다
	SIF ENEMY_TYPE_CHECK_F("AKUOTI") == 1
		CALL MESSAGE_OTHER_SEX_COM4
	;지문: COM4
	CALL MESSAGE_SEX_COM4, EX_COM, SH_COM
ENDIF

;결계에 따른 촉수 개수의 변동
CALL SET_TENTACLE_POOL
;의상에의 피해
CALL CLOTH_BATTLE_DAMAGE, 4

;BASE
SIF EX_COM & Ａ
	EXP:Ａ경험 += 1



;굴복
IF ABL:Ａ감각 == 0
	LOCAL:8 = 100
ELSEIF ABL:Ａ감각 == 1
	LOCAL:8 = 200
ELSEIF ABL:Ａ감각 == 2
	LOCAL:8 = 500
ELSEIF ABL:Ａ감각 == 3
	LOCAL:8 = 1000
ELSEIF ABL:Ａ감각 == 4
	LOCAL:8 = 2000
ELSEIF ABL:Ａ감각 >= 5
	LOCAL:8 = 4500 * ABL:Ａ감각 * 100
ENDIF

;감각과 윤활이 낮으면 고통이 들어간다
IF ABL:Ａ감각 < 3
	IF PALAM:윤활 < 100
		LOCAL:10 = 1000
	ELSEIF PALAM:윤활 < 10000
		LOCAL:10 = 100
	ELSE
		LOCAL:10 = 10
	ENDIF
ELSE
	IF PALAM:윤활 < 100
		LOCAL:10 = 100
	ELSEIF PALAM:윤활 < 10000
		LOCAL:10 = 10
	ELSE
	ENDIF
ENDIF
SIF BASE:Ａ결계내구력 > 0
	LOCAL:10 = 0

;감각이 낮으면 공포가 들어간다
IF ABL:Ａ감각 == 0
	LOCAL:11 = 1000
ELSEIF ABL:Ａ감각 == 1
	LOCAL:11 = 500
ELSEIF ABL:Ａ감각 == 2
	LOCAL:11 = 200
ELSE
ENDIF
SIF BASE:Ａ결계내구력 > 0
	LOCAL:11 /= 2

;추가 고문 실행
IF EX_COM
	CALL SEX_COMEX, Ａ, 0, EX_COM | SH_COM
	REPEAT 12
		LOCAL:COUNT += RESULT:COUNT
	REND
ENDIF

;행동 예약 없음
TFLAG:17 = -1
;촉수의 행동을 기록
TFLAG:20 = 4

;습득 기본값
LOCAL:6 += 0

;욕정 기본값
LOCAL:7 += 0

;굴복 기본값
LOCAL:8 += 500

;치정 기본값
LOCAL:9 += 500

;고통 기본값
LOCAL:10 += 100

;공포 기본값
LOCAL:11 += 100

;체력 소비 기본값
LOCAL:12 += 50

;계산으로
CALL PALAM_CAL, LOCAL:0, LOCAL:1, LOCAL:2, LOCAL:3, LOCAL:4, LOCAL:5, LOCAL:6, LOCAL:7, LOCAL:8, LOCAL:9, LOCAL:10, LOCAL:11, LOCAL:12
